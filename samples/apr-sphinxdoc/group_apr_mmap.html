<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MMAP (Memory Map) Routines &#8212; Apache Portable Runtime Documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css?v=ff3f4257" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css?v=3785b6ce" />
    <script src="_static/documentation_options.js?v=73275c37"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/target-highlight.js?v=df7d332b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="struct apr_mmap_t" href="struct_apr_mmap_t.html" />
    <link rel="prev" title="struct apr_memnode_t" href="struct_apr_memnode_t.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="struct_apr_mmap_t.html" title="struct apr_mmap_t"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="struct_apr_memnode_t.html" title="struct apr_memnode_t"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Apache Portable Runtime Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_APR.html" accesskey="U">Apache Portability Runtime library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MMAP (Memory Map) Routines</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="mmap-memory-map-routines">
<span id="doxid-group-apr-mmap"></span><span id="index-0"></span><h1>MMAP (Memory Map) Routines</h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<h2>Overview</h2>
<pre class="highlight doxyrest-overview-code-block literal-block"><span></span><span class="c1">// typedefs</span>

<span class="k">typedef</span> <span class="k">struct</span> <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span> <a class="reference internal" href="#doxid-group-apr-mmap-1ga766b01a3e1e0438d06dc88d76f826f80"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="p">;</span>

<span class="c1">// structs</span>

<span class="k">struct</span> <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="p">;</span>

<span class="c1">// global functions</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-mmap-1gac6b103139be2e859741ec94cc6ad34cc"><span class="std std-ref">apr_mmap_create</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">**</span> <span class="n">newmmap</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_file_io.html#doxid-group-apr-file-io-1gaa46e4763ac375ea3c7a43ba6f6099e22"><span class="std std-ref">apr_file_t</span></a><span></span><span class="o">*</span> <span class="n">file</span><span class="p">,</span>
    <span class="n">apr_off_t</span> <span class="n">offset</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">size</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flag</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">cntxt</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-mmap-1ga9fcdbf8090e924a4e8f2b301519bb4c8"><span class="std std-ref">apr_mmap_dup</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">**</span> <span class="n">new_mmap</span><span class="p">,</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">old_mmap</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">p</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-mmap-1ga4b67a2d22a07707897cc1183a1682040"><span class="std std-ref">apr_mmap_delete</span></a><span></span><span class="p">(</span><a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">mm</span><span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-mmap-1ga4c1d31bd9e911744bd5edb97e17210ec"><span class="std std-ref">apr_mmap_offset</span></a><span></span><span class="p">(</span>
    <span class="kt">void</span><span class="o">**</span> <span class="n">addr</span><span class="p">,</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">mm</span><span class="p">,</span>
    <span class="n">apr_off_t</span> <span class="n">offset</span>
<span class="p">);</span>

<span class="c1">// macros</span>

<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-mmap-1ga4f469432098e986567576fd4c4ce5adc"><span class="std std-ref">APR_MMAP_CANDIDATE</span></a><span></span><span class="p">(</span><span class="n">filelength</span><span class="p">)</span>
<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-mmap-1ga548e49b3c9e8265ad8ccf70994f4fe25"><span class="std std-ref">APR_MMAP_LIMIT</span></a><span></span>
<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-mmap-1gac231fdf15d2d29802e0abbc5d0cf25b8"><span class="std std-ref">APR_MMAP_READ</span></a><span></span>
<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-mmap-1ga19d1916e7b64bfb1a969648fe7b0846a"><span class="std std-ref">APR_MMAP_THRESHOLD</span></a><span></span>
<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-mmap-1gac2eb7f697d8bf190e630b85f967c8273"><span class="std std-ref">APR_MMAP_WRITE</span></a></pre>
</section>
<section id="detailed-documentation">
<span id="details-group-apr-mmap"></span><h2>Detailed Documentation</h2>
<section id="typedefs">
<h3>Typedefs</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga766b01a3e1e0438d06dc88d76f826f80"><span id="index-1"></span><span></span><span class="k">typedef</span> <span class="k">struct</span> <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span> <span class="n">apr_mmap_t</span></pre>
<p class="rubric">See also:</p>
<p><a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a></p>
</section>
<section id="global-functions">
<h3>Global Functions</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1gac6b103139be2e859741ec94cc6ad34cc"><span id="index-2"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_mmap_create</span><span class="p">(</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">**</span> <span class="n">newmmap</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_file_io.html#doxid-group-apr-file-io-1gaa46e4763ac375ea3c7a43ba6f6099e22"><span class="std std-ref">apr_file_t</span></a><span></span><span class="o">*</span> <span class="n">file</span><span class="p">,</span>
    <span class="n">apr_off_t</span> <span class="n">offset</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">size</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flag</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">cntxt</span>
<span class="p">)</span></pre>
<p>Create a new mmap’ed file out of an existing APR file.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>newmmap</p></td>
<td><p>The newly created mmap’ed file.</p></td>
</tr>
<tr class="row-even"><td><p>file</p></td>
<td><p>The file to turn into an mmap.</p></td>
</tr>
<tr class="row-odd"><td><p>offset</p></td>
<td><p>The offset into the file to start the data pointer at.</p></td>
</tr>
<tr class="row-even"><td><p>size</p></td>
<td><p>The size of the file</p></td>
</tr>
<tr class="row-odd"><td><p>flag</p></td>
<td><p>bit-wise or of:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>APR_MMAP_READ       MMap opened for reading
APR_MMAP_WRITE      MMap opened for writing
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>cntxt</p></td>
<td><p>The pool to use when creating the mmap.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga9fcdbf8090e924a4e8f2b301519bb4c8"><span id="index-3"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_mmap_dup</span><span class="p">(</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">**</span> <span class="n">new_mmap</span><span class="p">,</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">old_mmap</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">p</span>
<span class="p">)</span></pre>
<p>Duplicate the specified MMAP.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>new_mmap</p></td>
<td><p>The structure to duplicate into.</p></td>
</tr>
<tr class="row-even"><td><p>old_mmap</p></td>
<td><p>The mmap to duplicate.</p></td>
</tr>
<tr class="row-odd"><td><p>p</p></td>
<td><p>The pool to use for new_mmap.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga4b67a2d22a07707897cc1183a1682040"><span id="index-4"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_mmap_delete</span><span class="p">(</span><a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">mm</span><span class="p">)</span></pre>
<p>Remove a mmap’ed.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>mm</p></td>
<td><p>The mmap’ed file.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga4c1d31bd9e911744bd5edb97e17210ec"><span id="index-5"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_mmap_offset</span><span class="p">(</span>
    <span class="kt">void</span><span class="o">**</span> <span class="n">addr</span><span class="p">,</span>
    <a class="reference internal" href="struct_apr_mmap_t.html#doxid-structapr-mmap-t"><span class="std std-ref">apr_mmap_t</span></a><span></span><span class="o">*</span> <span class="n">mm</span><span class="p">,</span>
    <span class="n">apr_off_t</span> <span class="n">offset</span>
<span class="p">)</span></pre>
<p>Move the pointer into the mmap’ed file to the specified offset.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>addr</p></td>
<td><p>The pointer to the offset specified.</p></td>
</tr>
<tr class="row-even"><td><p>mm</p></td>
<td><p>The mmap’ed file.</p></td>
</tr>
<tr class="row-odd"><td><p>offset</p></td>
<td><p>The offset to move to.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="macros">
<h3>Macros</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga4f469432098e986567576fd4c4ce5adc"><span id="index-6"></span><span></span><span class="cp">#define APR_MMAP_CANDIDATE(filelength)</span></pre>
<p>Can this file be MMaped</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga548e49b3c9e8265ad8ccf70994f4fe25"><span id="index-7"></span><span></span><span class="cp">#define APR_MMAP_LIMIT</span></pre>
<p>Maximum size of MMap region</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1gac231fdf15d2d29802e0abbc5d0cf25b8"><span id="index-8"></span><span></span><span class="cp">#define APR_MMAP_READ</span></pre>
<p>MMap opened for reading</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1ga19d1916e7b64bfb1a969648fe7b0846a"><span id="index-9"></span><span></span><span class="cp">#define APR_MMAP_THRESHOLD</span></pre>
<p>Files have to be at least this big before they’re mmap()d. This is to deal with systems where the expense of doing an mmap() and an munmap() outweighs the benefit for small files. It shouldn’t be set lower than 1.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-mmap-1gac2eb7f697d8bf190e630b85f967c8273"><span id="index-10"></span><span></span><span class="cp">#define APR_MMAP_WRITE</span></pre>
<p>MMap opened for writing</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">MMAP (Memory Map) Routines</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a><ul>
<li><a class="reference internal" href="#typedefs">Typedefs</a></li>
<li><a class="reference internal" href="#global-functions">Global Functions</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="struct_apr_memnode_t.html"
                          title="previous chapter">struct apr_memnode_t</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="struct_apr_mmap_t.html"
                          title="next chapter">struct apr_mmap_t</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="struct_apr_mmap_t.html" title="struct apr_mmap_t"
             >next</a> |</li>
        <li class="right" >
          <a href="struct_apr_memnode_t.html" title="struct apr_memnode_t"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Apache Portable Runtime Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_APR.html" >Apache Portability Runtime library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MMAP (Memory Map) Routines</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2008-2017, Apache Portable Runtime Maintainers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>