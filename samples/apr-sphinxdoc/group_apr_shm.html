<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Shared Memory Routines &#8212; Apache Portable Runtime Documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css?v=ff3f4257" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css?v=3785b6ce" />
    <script src="_static/documentation_options.js?v=73275c37"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/target-highlight.js?v=df7d332b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Signal Handling" href="group_apr_signal.html" />
    <link rel="prev" title="Ring Macro Implementations" href="group_apr_ring.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="group_apr_signal.html" title="Signal Handling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="group_apr_ring.html" title="Ring Macro Implementations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Apache Portable Runtime Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_APR.html" accesskey="U">Apache Portability Runtime library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Shared Memory Routines</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="shared-memory-routines">
<span id="doxid-group-apr-shm"></span><span id="index-0"></span><h1>Shared Memory Routines</h1>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<h2>Overview</h2>
<pre class="highlight doxyrest-overview-code-block literal-block"><span></span><span class="c1">// typedefs</span>

<span class="k">typedef</span> <span class="k">struct</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="p">;</span>

<span class="c1">// global functions</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1gac370c4943c22505ce2b0d57c51805480"><span class="std std-ref">apr_shm_create</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">reqsize</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga21baaa66956641e06e072501f61882e7"><span class="std std-ref">apr_shm_create_ex</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">reqsize</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flags</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1gaee8b7d9b952ff6157ddbb00fabb477e0"><span class="std std-ref">apr_shm_remove</span></a><span></span><span class="p">(</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga7de5b65a9c7d9840bfa289854f8d59d4"><span class="std std-ref">apr_shm_destroy</span></a><span></span><span class="p">(</span><a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga0e542941c280cb72b78e30d452464759"><span class="std std-ref">apr_shm_attach</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga088260723c96815610ff628f358d3630"><span class="std std-ref">apr_shm_attach_ex</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flags</span>
<span class="p">);</span>

<a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga900095a06d3fdb4cdd04ca4449a9d42a"><span class="std std-ref">apr_shm_detach</span></a><span></span><span class="p">(</span><a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">);</span>

<span class="kt">void</span><span class="o">*</span>
<a class="reference internal" href="#doxid-group-apr-shm-1gade739e1f5f4e88c93256a63ebfd47d4d"><span class="std std-ref">apr_shm_baseaddr_get</span></a><span></span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">);</span>

<span class="n">apr_size_t</span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga557ae85d3f225620a77ad80caeaacac7"><span class="std std-ref">apr_shm_size_get</span></a><span></span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">);</span>

<a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span>
<a class="reference internal" href="#doxid-group-apr-shm-1ga072c40df7643e697885935ae65545098"><span class="std std-ref">apr_shm_pool_get</span></a><span></span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">theshm</span><span class="p">);</span>

<span class="c1">// macros</span>

<span class="cp">#define </span><span class="doxyrest-code-target target" id="doxid-group-apr-shm-1ga0de8e4acab42e7ff8e35e5ac9620f667"><span></span><span class="n">APR_SHM_NS_GLOBAL</span></span><span></span>
<span class="cp">#define </span><a class="reference internal" href="#doxid-group-apr-shm-1ga47cc28ddc5f32cf904383b9e4f82825b"><span class="std std-ref">APR_SHM_NS_LOCAL</span></a></pre>
</section>
<section id="detailed-documentation">
<span id="details-group-apr-shm"></span><h2>Detailed Documentation</h2>
<section id="typedefs">
<h3>Typedefs</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span id="index-1"></span><span></span><span class="k">typedef</span> <span class="k">struct</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span> <span class="n">apr_shm_t</span></pre>
<p>Private, platform-specific data struture representing a shared memory segment.</p>
</section>
<section id="global-functions">
<h3>Global Functions</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1gac370c4943c22505ce2b0d57c51805480"><span id="index-2"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_create</span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">reqsize</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">)</span></pre>
<p>Create and make accessible a shared memory segment with default properties. A note about Anonymous vs. Named shared memory segments: Not all plaforms support anonymous shared memory segments, but in some cases it is prefered over other types of shared memory implementations. Passing a NULL ‘file’ parameter to this function will cause the subsystem to use anonymous shared memory segments. If such a system is not available, APR_ENOTIMPL is returned.</p>
<p>A note about allocation sizes: On some platforms it is necessary to store some metainformation about the segment within the actual segment. In order to supply the caller with the requested size it may be necessary for the implementation to request a slightly greater segment length from the subsystem. In all cases, the <a class="reference internal" href="#doxid-group-apr-shm-1gade739e1f5f4e88c93256a63ebfd47d4d"><span class="std std-ref">apr_shm_baseaddr_get()</span></a> function will return the first usable byte of memory.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory structure to create.</p></td>
</tr>
<tr class="row-even"><td><p>reqsize</p></td>
<td><p>The desired size of the segment.</p></td>
</tr>
<tr class="row-odd"><td><p>filename</p></td>
<td><p>The file to use for shared memory on platforms that require it.</p></td>
</tr>
<tr class="row-even"><td><p>pool</p></td>
<td><p>the pool from which to allocate the shared memory structure.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga21baaa66956641e06e072501f61882e7"><span id="index-3"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_create_ex</span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="n">apr_size_t</span> <span class="n">reqsize</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flags</span>
<span class="p">)</span></pre>
<p>Create and make accessible a shared memory segment with platform- specific processing. A note about Anonymous vs. Named shared memory segments: Not all plaforms support anonymous shared memory segments, but in some cases it is prefered over other types of shared memory implementations. Passing a NULL ‘file’ parameter to this function will cause the subsystem to use anonymous shared memory segments. If such a system is not available, APR_ENOTIMPL is returned.</p>
<p>A note about allocation sizes: On some platforms it is necessary to store some metainformation about the segment within the actual segment. In order to supply the caller with the requested size it may be necessary for the implementation to request a slightly greater segment length from the subsystem. In all cases, the <a class="reference internal" href="#doxid-group-apr-shm-1gade739e1f5f4e88c93256a63ebfd47d4d"><span class="std std-ref">apr_shm_baseaddr_get()</span></a> function will return the first usable byte of memory.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory structure to create.</p></td>
</tr>
<tr class="row-even"><td><p>reqsize</p></td>
<td><p>The desired size of the segment.</p></td>
</tr>
<tr class="row-odd"><td><p>filename</p></td>
<td><p>The file to use for shared memory on platforms that require it.</p></td>
</tr>
<tr class="row-even"><td><p>pool</p></td>
<td><p>the pool from which to allocate the shared memory structure.</p></td>
</tr>
<tr class="row-odd"><td><p>flags</p></td>
<td><p>mask of APR_SHM_* (defined above)</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1gaee8b7d9b952ff6157ddbb00fabb477e0"><span id="index-4"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_remove</span><span class="p">(</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">)</span></pre>
<p>Remove named resource associated with a shared memory segment, preventing attachments to the resource, but not destroying it. This function is only supported on platforms which support name-based shared memory segments, and will return APR_ENOTIMPL on platforms without such support. Removing the file while the shm is in use is not entirely portable, caller may use this to enhance obscurity of the resource, but be prepared for the call to fail, and for concurrent attempts to create a resource of the same name to also fail. The pool cleanup of apr_shm_create (apr_shm_destroy) also removes the named resource.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>filename</p></td>
<td><p>The filename associated with shared-memory segment which needs to be removed</p></td>
</tr>
<tr class="row-even"><td><p>pool</p></td>
<td><p>The pool used for file operations</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga7de5b65a9c7d9840bfa289854f8d59d4"><span id="index-5"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_destroy</span><span class="p">(</span><a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">)</span></pre>
<p>Destroy a shared memory segment and associated memory.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory segment structure to destroy.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga0e542941c280cb72b78e30d452464759"><span id="index-6"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_attach</span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span>
<span class="p">)</span></pre>
<p>Attach to a shared memory segment that was created by another process.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory structure to create.</p></td>
</tr>
<tr class="row-even"><td><p>filename</p></td>
<td><p>The file used to create the original segment. (This MUST match the original filename.)</p></td>
</tr>
<tr class="row-odd"><td><p>pool</p></td>
<td><p>the pool from which to allocate the shared memory structure for this process.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga088260723c96815610ff628f358d3630"><span id="index-7"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_attach_ex</span><span class="p">(</span>
    <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">**</span> <span class="n">m</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">,</span>
    <a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span> <span class="n">pool</span><span class="p">,</span>
    <span class="n">apr_int32_t</span> <span class="n">flags</span>
<span class="p">)</span></pre>
<p>Attach to a shared memory segment that was created by another process, with platform-specific processing.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory structure to create.</p></td>
</tr>
<tr class="row-even"><td><p>filename</p></td>
<td><p>The file used to create the original segment. (This MUST match the original filename.)</p></td>
</tr>
<tr class="row-odd"><td><p>pool</p></td>
<td><p>the pool from which to allocate the shared memory structure for this process.</p></td>
</tr>
<tr class="row-even"><td><p>flags</p></td>
<td><p>mask of APR_SHM_* (defined above)</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga900095a06d3fdb4cdd04ca4449a9d42a"><span id="index-8"></span><a class="reference internal" href="group_apr_errno.html#doxid-group-apr-errno-1gaf76ee4543247e9fb3f3546203e590a6c"><span class="std std-ref">apr_status_t</span></a><span></span>
<span class="n">apr_shm_detach</span><span class="p">(</span><a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">)</span></pre>
<p>Detach from a shared memory segment without destroying it.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory structure representing the segment to detach from.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1gade739e1f5f4e88c93256a63ebfd47d4d"><span id="index-9"></span><span></span><span class="kt">void</span><span class="o">*</span>
<span class="n">apr_shm_baseaddr_get</span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">)</span></pre>
<p>Retrieve the base address of the shared memory segment. NOTE: This address is only usable within the callers address space, since this API does not guarantee that other attaching processes will maintain the same address mapping.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory segment from which to retrieve the base address.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Returns:</p>
<p>address, aligned by APR_ALIGN_DEFAULT.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga557ae85d3f225620a77ad80caeaacac7"><span id="index-10"></span><span></span><span class="n">apr_size_t</span>
<span class="n">apr_shm_size_get</span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">m</span><span class="p">)</span></pre>
<p>Retrieve the length of a shared memory segment in bytes.</p>
<p class="rubric">Parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>m</p></td>
<td><p>The shared memory segment from which to retrieve the segment length.</p></td>
</tr>
</tbody>
</table>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga072c40df7643e697885935ae65545098"><span id="index-11"></span><a class="reference internal" href="group_apr_pools.html#doxid-group-apr-pools-1gaf137f28edcf9a086cd6bc36c20d7cdfb"><span class="std std-ref">apr_pool_t</span></a><span></span><span class="o">*</span>
<span class="n">apr_shm_pool_get</span><span class="p">(</span><span class="k">const</span> <a class="reference internal" href="#doxid-group-apr-shm-1ga79e8c16bdeaf7ade4ef0f935249e7c2f"><span class="std std-ref">apr_shm_t</span></a><span></span><span class="o">*</span> <span class="n">theshm</span><span class="p">)</span></pre>
<p>Get the pool used by this shared memory segment.</p>
</section>
<section id="macros">
<h3>Macros</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-group-apr-shm-1ga47cc28ddc5f32cf904383b9e4f82825b"><span id="index-12"></span><span></span><span class="cp">#define APR_SHM_NS_LOCAL</span></pre>
<p>Special processing flags for <a class="reference internal" href="#doxid-group-apr-shm-1ga21baaa66956641e06e072501f61882e7"><span class="std std-ref">apr_shm_create_ex()</span></a> and <a class="reference internal" href="#doxid-group-apr-shm-1ga088260723c96815610ff628f358d3630"><span class="std std-ref">apr_shm_attach_ex()</span></a>.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Shared Memory Routines</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a><ul>
<li><a class="reference internal" href="#typedefs">Typedefs</a></li>
<li><a class="reference internal" href="#global-functions">Global Functions</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="group_apr_ring.html"
                          title="previous chapter">Ring Macro Implementations</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="group_apr_signal.html"
                          title="next chapter">Signal Handling</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="group_apr_signal.html" title="Signal Handling"
             >next</a> |</li>
        <li class="right" >
          <a href="group_apr_ring.html" title="Ring Macro Implementations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Apache Portable Runtime Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_APR.html" >Apache Portability Runtime library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Shared Memory Routines</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2008-2017, Apache Portable Runtime Maintainers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>