

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RawMidi interface &mdash; ALSA Library Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css?v=ff3f4257" />
      <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinx_rtd_theme.css?v=b6ca47bd" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=cb7bf70b"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/target-highlight.js?v=df7d332b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Runtime arguments in configuration files" href="page_confarg.html" />
    <link rel="prev" title="PCM External Plugin SDK" href="page_pcm_external_plugins.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ALSA Library Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="group_Config.html">Configuration Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Digital_Audio_Interface.html">Constants for Digital Audio Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_MIDI_Interface.html">Constants for MIDI v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Control.html">Control Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Error.html">Error handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_CtlPlugin_SDK.html">External Control Plugin SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Plugin_SDK.html">External PCM plugin SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Global.html">Global defines and functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_HwDep.html">Hardware Dependant Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Input.html">Input Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Sequencer.html">MIDI Sequencer</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Mixer.html">Mixer Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Output.html">Output Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_PCM.html">PCM Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_RawMidi.html">RawMidi Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_Timer.html">Timer Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_topology.html">Topology Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_ucm.html">Use Case Interface</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="page_topology.html">ALSA Topology Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_Usecase.html">ALSA Use Case Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_bug.html">Bug List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_conf.html">Configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_control.html">Control interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_deprecated.html">Deprecated List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_ctl_external_plugins.html">External Control Plugin SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_hcontrol.html">High level control interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_confhooks.html">Hooks in configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_mixer.html">Mixer interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_pcm.html">PCM (digital audio) interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_pcm_plugins.html">PCM (digital audio) plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_pcm_external_plugins.html">PCM External Plugin SDK</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">RawMidi interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-overview">General overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-handling">Open handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nonblocking-open-flag">Nonblocking open (flag)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#append-open-flag">Append open (flag)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sync-open-flag">Sync open (flag)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-o-handling">I/O handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rawmidi-naming-conventions">RawMidi naming conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rawmidi-dev-names-default">rawmidi_dev_names_default</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hw-device">HW device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-rawmidi-interface">Virtual RawMidi interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_confarg.html">Runtime arguments in configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_conffunc.html">Runtime functions in configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_seq.html">Sequencer interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_timer.html">Timer interface</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example__test_latency.c.html">/test/latency.c</a></li>
<li class="toctree-l1"><a class="reference internal" href="example__test_pcm.c.html">/test/pcm.c</a></li>
<li class="toctree-l1"><a class="reference internal" href="example__test_pcm_min.c.html">/test/pcm_min.c</a></li>
<li class="toctree-l1"><a class="reference internal" href="example__test_rawmidi.c.html">/test/rawmidi.c</a></li>
<li class="toctree-l1"><a class="reference internal" href="example__test_timer.c.html">/test/timer.c</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ALSA Library Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">RawMidi interface</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rawmidi-interface">
<span id="doxid-rawmidi"></span><span id="index-0"></span><h1>RawMidi interface</h1>
<p>RawMidi Interface is designed to write or read raw (unchanged) MIDI data over the MIDI line without any timestamps defined in interface. MIDI stands Musical Instrument Digital Interface and more information about this standard can be found at <a class="reference external" href="http://www.midi.org">http://www.midi.org</a>.</p>
<section id="general-overview">
<span id="doxid-rawmidi-1rawmidi-general-overview"></span><h2>General overview</h2>
<p>The rawmidi implementation uses ring buffers to store outgoing and incoming MIDI stream. The buffer size is tunable and drivers report underruns for incoming stream as well.</p>
</section>
<section id="open-handling">
<span id="doxid-rawmidi-1rawmidi-open"></span><h2>Open handling</h2>
<p>RawMidi devices are opened exclusively for a selected direction. While more than one process may not open a given MIDI device in the same direction simultaneously, separate processes may open a single MIDI device in different directions (i.e. process one opens a MIDI device in write direction and process two opens the same device in read direction).</p>
<section id="nonblocking-open-flag">
<span id="doxid-rawmidi-1rawmidi-open-nonblock"></span><h3>Nonblocking open (flag)</h3>
<p>Using <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga31ee35659c82272382ccc3014c8a73f8"><span class="std std-ref">SND_RAWMIDI_NONBLOCK</span></a> flag for <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga2ab783051deeb7eb37eb568b76448889"><span class="std std-ref">snd_rawmidi_open()</span></a> or <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1gaa7e3daf5cf4dd36b2534d2f1d6309477"><span class="std std-ref">snd_rawmidi_open_lconf()</span></a> instruct device driver to return the -EBUSY error when device is already occupied with another application. This flag also changes behaviour of <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga0a30e482efec57f4ea74c533a0f9b134"><span class="std std-ref">snd_rawmidi_write()</span></a> and <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga9b0952fc04facda83cdf1521325ca475"><span class="std std-ref">snd_rawmidi_read()</span></a> returning -EAGAIN when no more bytes can be processed.</p>
<p>Note: In opposite (default) behaviour, application is blocked until device resources are free.</p>
</section>
<section id="append-open-flag">
<span id="doxid-rawmidi-1rawmidi-open-append"></span><h3>Append open (flag)</h3>
<p>Using <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga7060640f32abcd337239bde2c8749d23"><span class="std std-ref">SND_RAWMIDI_APPEND</span></a> flag (output only) instruct device driver to append contents of written buffer - passed by <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga0a30e482efec57f4ea74c533a0f9b134"><span class="std std-ref">snd_rawmidi_write()</span></a> - atomically to output ring buffer in the kernel space. This flag also means that device is not opened exclusively, so more applications can share given rawmidi device. Note that applications must send the whole MIDI message including the running status, because another writing application might break the MIDI message in the output buffer.</p>
</section>
<section id="sync-open-flag">
<span id="doxid-rawmidi-1rawmidi-open-sync"></span><h3>Sync open (flag)</h3>
<p>Using <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1gab1a659b38e5174d790d5671739995894"><span class="std std-ref">SND_RAWMIDI_SYNC</span></a> flag (output only) assures that the contents of output buffer specified using <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga0a30e482efec57f4ea74c533a0f9b134"><span class="std std-ref">snd_rawmidi_write()</span></a> is always drained before the function exits. This behaviour is same like ‘ <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga0a30e482efec57f4ea74c533a0f9b134"><span class="std std-ref">snd_rawmidi_write()</span></a> followed by <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1gabfff7417ec957b7ee07882f91d73d7be"><span class="std std-ref">snd_rawmidi_drain()</span></a> immediately’.</p>
</section>
<section id="i-o-handling">
<span id="doxid-rawmidi-1rawmidi-io"></span><h3>I/O handling</h3>
<p>There is only standard read/write access to device internal ring buffer. Use <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga9b0952fc04facda83cdf1521325ca475"><span class="std std-ref">snd_rawmidi_read()</span></a> and <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga0a30e482efec57f4ea74c533a0f9b134"><span class="std std-ref">snd_rawmidi_write()</span></a> functions to obtain / write MIDI bytes.</p>
</section>
<section id="rawmidi-naming-conventions">
<span id="doxid-rawmidi-1rawmidi-dev-names"></span><h3>RawMidi naming conventions</h3>
<p>The ALSA library uses a generic string representation for names of devices. The devices might be virtual, physical or a mix of both. The generic string is passed to <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1ga2ab783051deeb7eb37eb568b76448889"><span class="std std-ref">::snd_rawmidi_open()</span></a> or <a class="reference internal" href="group_RawMidi.html#doxid-group-raw-midi-1gaa7e3daf5cf4dd36b2534d2f1d6309477"><span class="std std-ref">::snd_rawmidi_open_lconf()</span></a>. It contains two parts: device name and arguments. Devices and arguments are described in configuration files. The usual place for default definitions is at /usr/share/alsa/alsa.conf.</p>
</section>
<section id="rawmidi-dev-names-default">
<span id="doxid-rawmidi-1rawmidi-dev-names-default"></span><h3>rawmidi_dev_names_default</h3>
<p>The default device is equal to hw device. The defaults are used:</p>
<p>defaults.rawmidi.card 0 defaults.rawmidi.device 0 defaults.rawmidi.subdevice -1</p>
<p>These defaults can be freely overwritten in local configuration files.</p>
<p>Example:</p>
<pre class="highlight literal-block"><span></span><span class="k">default</span></pre>
</section>
<section id="hw-device">
<span id="doxid-rawmidi-1rawmidi-dev-names-hw"></span><h3>HW device</h3>
<p>The hw device description uses the hw plugin. The three arguments (in order: CARD,DEV,SUBDEV) specify card number or identifier, device number and subdevice number (-1 means any).</p>
<p>Example:</p>
<pre class="highlight literal-block"><span></span><span class="n">hw</span>
<span class="nl">hw</span><span class="p">:</span><span class="mi">0</span>
<span class="nl">hw</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="nl">hw</span><span class="p">:</span><span class="n">supersonic</span><span class="p">,</span><span class="mi">1</span>
<span class="nl">hw</span><span class="p">:</span><span class="n">soundwave</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span>
<span class="nl">hw</span><span class="p">:</span><span class="n">DEV</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CARD</span><span class="o">=</span><span class="n">soundwave</span><span class="p">,</span><span class="n">SUBDEV</span><span class="o">=</span><span class="mi">2</span></pre>
</section>
</section>
<section id="examples">
<span id="doxid-rawmidi-1rawmidi-examples"></span><h2>Examples</h2>
<p>The full featured examples with cross-links:</p>
<p><a class="reference internal" href="example__test_rawmidi.c.html#doxid-home-vladimir-develop-alsa-lib-alsa-lib-1-1-3-src-rawmidi-rawmidi-c-1example-test-rawmidi"><span class="std std-ref">example code</span></a></p>
<p>This example shows open and read/write rawmidi operations.</p>
</section>
<section id="virtual-rawmidi-interface">
<span id="doxid-rawmidi-1rawmidi-virt"></span><h2>Virtual RawMidi interface</h2>
<p>The “virtual” plugin creates a virtual RawMidi instance on the ALSA sequencer, which can be accessed through the connection of the sequencer ports. There is no connection established as default.</p>
<p>For creating a virtual RawMidi instance, pass “virtual” as its name at creation.</p>
<p>Example:</p>
<pre class="highlight literal-block"><span></span><span class="n">snd_rawmidi_open</span><span class="p">(</span><span class="o">&amp;</span><span class="n">read_handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">write_handle</span><span class="p">,</span> <span class="s">&quot;virtual&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></pre>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="page_pcm_external_plugins.html" class="btn btn-neutral float-left" title="PCM External Plugin SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="page_confarg.html" class="btn btn-neutral float-right" title="Runtime arguments in configuration files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1998-2017, ALSA Library Maintainers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>